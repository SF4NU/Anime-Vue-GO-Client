import{_ as q,r as v,c as o,a as M,b as e,F as N,d as J,u as r,o as a,e as n,w as K,t as _,n as X,f as S,v as ee,g as G,i as T,h as U,j as te,p as se,k as oe}from"./index-Bu_igz9o.js";import{r as ae,_ as ie}from"./ratingConverter-CZb7_kzj.js";import{_ as le}from"./youtube-svgrepo-com-DeR6TUWh.js";import{S as ne,c as B}from"./SubHeader-Bw5Uzi8i.js";const P="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M22%2012C22%2017.5228%2017.5228%2022%2012%2022C6.47715%2022%202%2017.5228%202%2012C2%206.47715%206.47715%202%2012%202C17.5228%202%2022%206.47715%2022%2012ZM15.75%2012C15.75%2012.4142%2015.4142%2012.75%2015%2012.75H9C8.58579%2012.75%208.25%2012.4142%208.25%2012C8.25%2011.5858%208.58579%2011.25%209%2011.25H15C15.4142%2011.25%2015.75%2011.5858%2015.75%2012Z'%20fill='%2343aa8b'/%3e%3c/g%3e%3c/svg%3e",I="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2032%2032'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20xmlns:sketch='http://www.bohemiancoding.com/sketch/ns'%20fill='%23000000'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3ctitle%3eplus-circle%3c/title%3e%3cdesc%3eCreated%20with%20Sketch%20Beta.%3c/desc%3e%3cdefs%3e%3c/defs%3e%3cg%20id='Page-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%20sketch:type='MSPage'%3e%3cg%20id='Icon-Set-Filled'%20sketch:type='MSLayerGroup'%20transform='translate(-466.000000,%20-1089.000000)'%20fill='%2343aa8b'%3e%3cpath%20d='M488,1106%20L483,1106%20L483,1111%20C483,1111.55%20482.553,1112%20482,1112%20C481.447,1112%20481,1111.55%20481,1111%20L481,1106%20L476,1106%20C475.447,1106%20475,1105.55%20475,1105%20C475,1104.45%20475.447,1104%20476,1104%20L481,1104%20L481,1099%20C481,1098.45%20481.447,1098%20482,1098%20C482.553,1098%20483,1098.45%20483,1099%20L483,1104%20L488,1104%20C488.553,1104%20489,1104.45%20489,1105%20C489,1105.55%20488.553,1106%20488,1106%20L488,1106%20Z%20M482,1089%20C473.163,1089%20466,1096.16%20466,1105%20C466,1113.84%20473.163,1121%20482,1121%20C490.837,1121%20498,1113.84%20498,1105%20C498,1096.16%20490.837,1089%20482,1089%20L482,1089%20Z'%20id='plus-circle'%20sketch:type='MSShapeGroup'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",re=c=>c.slice(0,4);function Z(c){return c.length>30?c.substring(0,30)+"...":c}const ce="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M22%2012C22%2017.5228%2017.5228%2022%2012%2022C6.47715%2022%202%2017.5228%202%2012C2%206.47715%206.47715%202%2012%202C17.5228%202%2022%206.47715%2022%2012ZM8.96963%208.96965C9.26252%208.67676%209.73739%208.67676%2010.0303%208.96965L12%2010.9393L13.9696%208.96967C14.2625%208.67678%2014.7374%208.67678%2015.0303%208.96967C15.3232%209.26256%2015.3232%209.73744%2015.0303%2010.0303L13.0606%2012L15.0303%2013.9696C15.3232%2014.2625%2015.3232%2014.7374%2015.0303%2015.0303C14.7374%2015.3232%2014.2625%2015.3232%2013.9696%2015.0303L12%2013.0607L10.0303%2015.0303C9.73742%2015.3232%209.26254%2015.3232%208.96965%2015.0303C8.67676%2014.7374%208.67676%2014.2625%208.96965%2013.9697L10.9393%2012L8.96963%2010.0303C8.67673%209.73742%208.67673%209.26254%208.96963%208.96965Z'%20fill='%23ff5900'/%3e%3c/g%3e%3c/svg%3e",y=c=>(se("data-v-a7c57447"),c=c(),oe(),c),ue={class:"main-anime-card-div"},de={key:0,class:"poster-div"},ve=["src","alt"],pe={key:1,class:"loader"},ge={key:2,class:"card-details"},he={class:"title"},_e={class:"year-ep-count"},Ce={class:"episode-count"},me={class:"year"},we={key:3,class:"rating-div"},be=y(()=>e("img",{height:"25px",src:ie,alt:""},null,-1)),fe=["data-tooltip"],ke=["href"],ye=y(()=>e("img",{class:"watch-img",src:le,alt:"watch-youtube-image"},null,-1)),xe=[ye],Se=["src","onClick"],Te={key:5,class:"add-to-list-expanded-div"},Ve={class:"check-if-plan-to-watch"},Le={class:"checkbox-wrapper-58"},De={class:"switch"},Ge=y(()=>e("span",{class:"slider"},null,-1)),Ie=y(()=>e("h4",null,"Anime da vedere",-1)),Ae={key:0},Re={key:1,class:"add-episodes-div"},Me=["onClick"],Ne=["onClick"],Ue={key:2},Be={key:3,class:"add-episodes-div"},Pe={class:"comment-div"},Ze={class:"text-area-div"},$e={key:1},je={class:"date-div"},Ee=y(()=>e("h5",null,"Data di inizio (opz.)",-1)),Ye={key:0},ze={__name:"AnimeCards",setup(c){const C=T("data"),A=T("isLoading"),$=T("isLoggedIn"),g=v(!1),m=v(""),V=v(0),j=()=>{V.value=m.value.length},w=v(!1),i=v(null),E=s=>{if(i.value===s){i.value=null,R();return}i.value=s,R()},R=()=>{l.value=0,p.value=1,m.value="",V.value=0,f.value=!1,k.value="",x.value="",g.value=!1,w.value=!1},l=v(0),b=s=>{if(l.value>s-1||l.value==="Completato"){w.value=!0,C.value[i.value].attributes.episodeCount===1&&(l.value=1);return}w.value=!1},Y=s=>{if(l.value>=s-1||l.value==="Completato"){l.value="Completato",b(s);return}b(s),l.value++},z=s=>{if(l.value<=0){l.value=0,b(s);return}if(l.value==="Completato"){l.value=s-1,b(s);return}l.value--,b(s)},p=v(1),F=()=>{if(p.value>=10){p.value=10;return}p.value+=.5},W=()=>{if(p.value<=1){p.value=1;return}p.value-=.5},f=v(!1),H=()=>{f.value=!f.value},k=v(""),x=v(""),L=s=>s.split("-").reverse().join("-"),D=T("userId"),O=async()=>{try{if(console.log(D),!$.value){console.log("You need to be logged in to add anime to your list");return}if(g.value){const s=await U.post(`https://anime-vue-go-client-production.up.railway.app/add/anime/${D.value}`,{title:C.value[i.value].attributes.canonicalTitle,finished:!1,episodes:0,rating:0,comment:"N/A",starting_date:L(k.value),ending_date:"N/A",plan_to_watch:!0});console.log(s),i.value=null;return}else{const s=await U.post(`https://anime-vue-go-client-production.up.railway.app/add/anime/${D.value}`,{title:C.value[i.value].attributes.canonicalTitle,finished:w.value,episodes:l.value==="Completato"?C.value[i.value].attributes.episodeCount:l.value,rating:p.value,comment:m.value===""?"N/A":m.value,starting_date:L(k.value),ending_date:L(x.value),plan_to_watch:!1});console.log(s),i.value=null}}catch(s){console.error(s)}};return(s,h)=>{const Q=te("router-link");return a(),o(N,null,[M(ne),e("div",ue,[(a(!0),o(N,null,J(r(C),(t,u)=>(a(),o("div",{key:u,class:"main-anime-display"},[!r(A)&&i.value!==u?(a(),o("div",de,[e("img",{class:"anime-poster",src:t.attributes.posterImage.tiny,alt:t.attributes.canonicalTitle+" poster"},null,8,ve)])):r(A)?(a(),o("div",pe)):n("",!0),i.value!==u?(a(),o("div",ge,[e("div",null,[M(Q,{to:{name:"AnimeInfo",params:{id:u}},class:"router-link"},{default:K(()=>[e("span",he,_(t.attributes.canonicalTitle.length>20&&t.attributes.abbreviatedTitles.length>0?r(B)(t.attributes.abbreviatedTitles):r(Z)(t.attributes.canonicalTitle)),1)]),_:2},1032,["to"])]),e("div",_e,[e("span",Ce,_(t.attributes.episodeCount>1?"Episodi: "+t.attributes.episodeCount:t.attributes.episodeCount===null?"N/A":"Film"),1),e("span",me,_(t.attributes.endDate?"Anno: "+r(re)(t.attributes.endDate):"In corso"),1)])])):n("",!0),i.value!==u?(a(),o("div",we,[be,e("span",null,_(r(ae)(t.attributes.averageRating)),1)])):n("",!0),i.value!==u?(a(),o("div",{key:4,class:"trailer-link-div","data-tooltip":`https://www.youtube.com/watch?v=${t.attributes.youtubeVideoId}`},[e("span",null,[e("a",{href:`https://www.youtube.com/watch?v=${t.attributes.youtubeVideoId}`,target:"_blank",class:"watch-link"},xe,8,ke)])],8,fe)):n("",!0),e("div",{class:X(i.value!==u?"add-to-list":"add-to-list-close"),"data-tooltip":"Aggiungi alla tua lista"},[e("img",{height:"35px",src:i.value!==u?r(I):r(ce),alt:"add-to-list",onClick:d=>E(u),id:"add-to-list-button"},null,8,Se)],2),i.value===u?(a(),o("div",Te,[e("h3",null," Aggiungi:   "+_(t.attributes.canonicalTitle.length>20&&t.attributes.abbreviatedTitles.length>0?r(B)(t.attributes.abbreviatedTitles):r(Z)(t.attributes.canonicalTitle))+" alla tua lista ",1),e("div",Ve,[e("div",Le,[e("label",De,[S(e("input",{type:"checkbox","onUpdate:modelValue":h[0]||(h[0]=d=>g.value=d)},null,512),[[ee,g.value]]),Ge])]),Ie]),!g.value&&t.attributes.episodeCount!==null&&t.attributes.episodeCount!==1?(a(),o("h4",Ae," Numero di episodi visti ")):n("",!0),!g.value&&t.attributes.episodeCount!==null&&t.attributes.episodeCount!==1?(a(),o("div",Re,[e("img",{height:"42px",src:P,onClick:d=>z(t.attributes.episodeCount),alt:"minus-svg"},null,8,Me),e("span",null,_(l.value),1),e("img",{height:"35px",src:I,onClick:d=>Y(t.attributes.episodeCount),alt:"plus-svg"},null,8,Ne)])):n("",!0),g.value?n("",!0):(a(),o("h4",Ue,"Voto")),g.value?n("",!0):(a(),o("div",Be,[e("img",{height:"42px",src:P,onClick:W,alt:"minus-svg"}),e("span",null,_(p.value),1),e("img",{height:"35px",src:I,onClick:F,alt:"plus-svg"})])),e("div",Pe,[e("button",{onClick:H},"Nota"),e("div",Ze,[f.value?S((a(),o("textarea",{key:0,onInput:j,maxlength:"200","onUpdate:modelValue":h[1]||(h[1]=d=>m.value=d),name:"comment",id:"comment",cols:"20",rows:"5",placeholder:"Questo anime mi è piaciuto/non mi è piaciuto perché..."},`\r
            `,544)),[[G,m.value]]):n("",!0),f.value?(a(),o("span",$e,_(V.value)+"/200",1)):n("",!0)])]),e("div",je,[Ee,S(e("input",{type:"date","onUpdate:modelValue":h[2]||(h[2]=d=>k.value=d),min:"2000-01-01",max:"2025-12-31"},null,512),[[G,k.value]]),w.value?(a(),o("h5",Ye,"Data di fine (opz.)")):n("",!0),w.value?S((a(),o("input",{key:1,type:"date","onUpdate:modelValue":h[3]||(h[3]=d=>x.value=d),min:"2000-01-01",max:"2025-12-31"},null,512)),[[G,x.value]]):n("",!0)]),e("div",{class:"submit-anime-div"},[e("button",{onClick:O},"Aggiungi")])])):n("",!0)]))),128))])],64)}}},Qe=q(ze,[["__scopeId","data-v-a7c57447"]]);export{Qe as default};
